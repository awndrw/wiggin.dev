@use 'theme/color';
@use 'theme/size';

.popoverContent {
  display: flex;
  gap: size.$spacing-small;
  border-radius: size.$border-radius-small;
  padding: 6px 12px;
  background-color: color.$accent-container-contrast;
  box-shadow: hsl(206 22% 7% / 35%) 0 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px;
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;
  z-index: 4;

  &[data-state='open'][data-side='top'] {
    animation-name: slideDownAndFade;
  }
  &[data-state='open'][data-side='right'] {
    animation-name: slideLeftAndFade;
  }
  &[data-state='open'][data-side='bottom'] {
    animation-name: slideUpAndFade;
  }
  &[data-state='open'][data-side='left'] {
    animation-name: slideRightAndFade;
  }
}

$track-h: 8px;
$thumb-d: 20px;

@mixin track() {
  border: none;
  width: 100%;
  height: $track-h;
  border-radius: $track-h;
  background: linear-gradient(
                  to right,
                  #ff0000 0%,
                  #ffff00 17%,
                  #00ff00 33%,
                  #00ffff 50%,
                  #0000ff 67%,
                  #ff00ff 83%,
                  #ff0000 100%
  );
}

@mixin thumb() {
  width: $thumb-d;
  height: $thumb-d;
  border-radius: 50%;
  background: white;
}

.popoverInput {
  width: 200px;
  margin: 0;
  padding: 0;
  min-height: $thumb-d;
  background: transparent;
  outline: none;

  &, &::-webkit-slider-thumb {
    -webkit-appearance: none;
  }
  &::-webkit-slider-runnable-track {
    @include track;
  }
  &::-moz-range-track { @include track; }
  &::-ms-track { @include track; }
  &::-webkit-slider-thumb {
    margin-top: .5*($track-h - $thumb-d);
    @include thumb;
  }
  &::-moz-range-thumb { @include thumb; }
  &::-ms-thumb {
    margin-top: 0;
    @include thumb;
  }
  &::-ms-tooltip { display: none }
}

.popoverOutput {
  display: grid;
  place-content: center;
}

.popoverArrow {
  fill: color.$accent-container-contrast;
}

@keyframes slideUpAndFade {
  from {
    opacity: 0;
    transform: translateY(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideRightAndFade {
  from {
    opacity: 0;
    transform: translateX(-2px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideDownAndFade {
  from {
    opacity: 0;
    transform: translateY(-2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideLeftAndFade {
  from {
    opacity: 0;
    transform: translateX(2px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
