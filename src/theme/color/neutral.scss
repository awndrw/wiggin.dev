@use "sass:map";
@use './base';

$modes: (
        "light": (
                "text": #1a1c1e,
                "background": #fdfcfe,
                "container-text": #000000,
                "container-background": #e4e4e4,
        ),
        "dark": (
                "text": #e3e2e4,
                "background": #1a1c1e,
                "container-text": #ffffff,
                "container-background": #515151,
        ),
);

@mixin make-theme($mode) {
  @if map.has-key($modes, $mode) {
    @each $color-name, $color-value in map.get($modes, $mode) {
      $var: map.get(base.$obfuscated-vars, $color-name);
      --#{$var}: #{$color-value};
    }
  } @else {
    @warn "Mode not found: #{$mode}";
  }
}

@mixin init {
  :root {
    @include make-theme("light");
    @media (prefers-color-scheme: dark) {
      @include make-theme("dark");
    }
  }
}
